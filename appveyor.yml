# appveyor.yml
---

environment:
  # Encrypted password (more precisely: token) for upload distro to pypy:
  # The "pypipw" is a custom name.
  # The original (sensitive) token is generated by the pypi: https://pypi.org/manage/account/token/
  # The token has encripted by the appveyor: https://ci.appveyor.com/tools/encrypt
  pypipw:
    secure: N+tYP6JrVCZ12LX7MUmHYJ8kx07F4A1hXtmEW01RmhrrQBdylIf0SO/eEfW5f4ox3S4xG/lgGSzNlZckvgifrsYeeBkWwoSH5/AJ3SnOJ7HBVojVt2t3bAznS6x3aPT7WDpwGN7piwus9aHSmpKaOzRoEOBKfgHv3aUzb907C0d0Yr12LU/4cIoTAn7jMziifSq45Z50lsQwzYic/VkarxTh+GXuCCm1Mb8F686H8i6Smm1Q1n9BsXowYnzwdrTZSBVOUtpd48Mh9JKgSNhfmQ==
  testpypipw:
    secure: CcyBI8e/2LdIT2aYIytTAgR4795DNBDM/ztsz1kqZYYOeNc3zlJWLdYWrnjCHn5W6/ZcAHrsxCdCMHvtr6PIVgBRpl2RR3fk2jKTzKqJJsLW871q30BsE0kws32f1IiqfjVtLn8BUC91IJ2xBBXtOYktf1tCMi3zJMSF9+MIOQKIu298bIRnD1Lc+4lzcSZJOn4I7dOMdzlcCMRqhtO58TGwR/hD+22FHjyWVB8nLL18AO+XXS9lHSOUrH6rD5NYvVFZD68oV/RrCGAjRmfMnw==

build: off

install:
  - pip install .[test]

test_script:
  - cmd: set WEXPECT_SPAWN_CLASS=SpawnPipe
  - cmd: python -m wexpect.console_reader "python -Wi tests\\list100.py"
  
after_test:
  - python dump_logs.py 

#on_failure:
#  - python dump_logs.py 
